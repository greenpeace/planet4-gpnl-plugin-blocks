{"version":3,"sources":["gpnl-inforequest.js"],"names":["request_form_element","check_form_element","formObj","el","inputs","$","serializeArray","each","showErrorMessage","find","value","hide","append","prop","window","location","href","toggleDisable","form","on","show","data","this","form_config","getFormObj","post_form_value","action","nonce","literaturecode","type","url","ajaxUrl","success","human","console","error","log"],"mappings":"aAAA,IAAIA,qBAAuB,GACvBC,mBAAqB,GAkFvB,SAAOC,WAAPC,GACD,IAAAD,EAAA,GALKE,EAASC,EAAEF,GAAIG,iBAUnBD,OAHFA,EAAAE,KAASC,EAAAA,SAAiBR,EAAAA,GACtBA,EAAAA,EAAAA,MAAsBS,EAAKC,QAE3BV,EAHJ,SAASQ,iBAAiBR,GACxBK,EAAEL,GAAsBS,KAAK,KAAKE,OASpCN,EAAAL,GAAAY,OAA2B,WACzBT,EAAEH,GAAsBa,OAAK,6CAC9BR,EAAAL,GAAAY,OAPG,YAAaE,OAAOC,SAASC,KAAM,uEAKvC,SAASC,cAAcd,GACrBA,EAAGU,KAAK,YAAaV,EAAGU,KAAK,aAjG/BR,EAAA,gBAAIL,GAAAA,QAAJ,WACA,IACEkB,EADEjB,EAAAA,MACckB,KAAG,UACnBd,EAAAa,GAAOE,KAAK,KACZf,EAAA,gBAAgBgB,KAAK,OAGtBhB,EALD,qBAAAc,GAAA,QAAA,WAOEd,EAAAiB,MAAAX,KAAA,KACAN,EAAE,gBAAFe,KAAA,OAMApB,EAAAA,uBAAuBmB,GAAA,SAAvB,WAEA,IAAII,EAAcC,WADlBxB,qBAAsBwB,MAEtBC,EAAgBC,sBAChBD,EAAgBE,OAASb,uBACzBW,EAAgBG,MAAAA,OAAhBL,GAAyCA,MAEzCN,EAAgBjB,eAAAA,OAAsBS,GAAtCmB,eACAX,cAAIQ,EAAAA,sBAA8BhB,KAAA,MACfT,KAAjBQ,EAAiBR,MAKjB6B,EAAAA,KAAI,CACJC,KAAShB,OACTO,IAASI,OAAAA,GAHJM,QAILC,KAASP,EACPpB,QAAEL,WACFK,EAAEL,sBAAsBY,KAAAA,KAAOD,OAN5BN,EAAAL,sBAAAY,OAAA,sCAWHJ,MAAAA,WAXJA,iBAAAR,yBAHEQ,iBAAAR,wBAsBFK,EAAA,qBAAkBc,GAAA,SAAA,WAElBM,IAAAA,EAAAD,WADAC,mBAAgBC,MAGhBT,EAAgBhB,sBAHhBwB,EAAgBC,OAAS,qBAIzBD,EAAIA,MAAAX,OAAJS,GAAkCI,MAEhCV,cAAAZ,EAAAJ,oBAAAQ,KAAA,MACD,KAAAgB,EAAAQ,MAKCZ,EAAAA,KAAI,CACJW,KAAS,OACP3B,IAAEJ,OAAAA,GAAyB8B,QAC3B1B,KAAEJ,EACFiC,QAAO,SAAPb,GAPGhB,EAAAJ,oBAAAQ,KAAA,KAAAE,OAULwB,EAAAA,oBAAiBvB,OAAA,qCACfsB,QAAAE,IAAAf,IAXJc,MAAA,WAYI3B,iBAAiBP,uBAhBnBO,iBAAiBP","file":"../gpnl-inforequest.js","sourcesContent":["var request_form_element = {};\nvar check_form_element = {};\n$('.hideshowbtn').on('click', function () {\n  let btn = $(this);\n  let form  = btn.data('target');\n  $(form).show(1000);\n  $('.hideshowbtn').hide(1000);\n});\n\n$('.inforequest_form').on('reset', function () {\n  $(this).hide(1000);\n  $('.hideshowbtn').show(1000);\n});\n\n\n$('.gpnl-request__form').on('submit', function () {\n  request_form_element = this;\n  var post_form_value = getFormObj(request_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'request_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n\n  toggleDisable($(request_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(request_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      $(request_form_element).find('*').hide();\n      $(request_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      showErrorMessage(request_form_element);\n    }\n  });\n});\n\n$('.gpnl-check__form').on('submit', function () {\n  check_form_element = this;\n  var post_form_value = getFormObj(check_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'check_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n\n  toggleDisable($(check_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(check_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function(data) {\n      $(check_form_element).find('*').hide();\n      $(check_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n      console.log(data);\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      showErrorMessage(check_form_element);\n    }\n  });\n});\n\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\nfunction showErrorMessage(request_form_element) {\n  $(request_form_element).find('*').hide();\n  $(request_form_element).append('Oh nee!');\n  $(request_form_element).append('<p>Hier gaat helaas iets mis, sorry. </p>');\n  $(request_form_element).append(\n    '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n    '\">Probeer je het nog eens? </a>');\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n}\n"]}