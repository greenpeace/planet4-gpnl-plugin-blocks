{"version":3,"sources":["gpnl-inforequest.js"],"names":["request_form_element","check_form_element","getFormObj","el","formObj","inputs","$","serializeArray","each","i","input","showErrorMessage","find","hide","append","prop","window","location","href","toggleDisable","form","on","show","data","this","post_form_value","form_config","action","nonce","literaturecode","human","ajax","type","url","ajaxUrl","success","html","prepend","error","remove"],"mappings":"aAAA,IAAIA,qBAAuB,GACvBC,mBAAqB,GAmFtB,SAFDC,WAAAC,GAGA,IAAAC,EAAA,GACDC,EAAAC,EAAAH,GAAAI,iBAICD,OARAA,EAAEE,KAAKH,EAAQ,SAAUI,EAAGC,GAM9BN,EAASO,EAAAA,MAAiBX,EAAAA,QAEtBA,EAKH,SAEDW,iBAAAX,GAREM,EAAEN,GAAsBY,KAAK,KAAKC,OAClCP,EAAEN,GAAsBc,OAAO,WAQjCR,EAAAN,GAAAc,OAA2B,6CACzBX,EAAEH,GAAsBe,OACzB,YAAAC,OAAAC,SAAAC,KAAA,uEAFD,SAASC,cAAchB,GACrBA,EAAGY,KAAK,YAAaZ,EAAGY,KAAK,aAnG/BT,EAAA,gBAAIN,GAAAA,QAAJ,WACA,IACEoB,EADEnB,EAAAA,MACcoB,KAAG,UACnBf,EAAAc,GAAOE,KAAK,KACZhB,EAAA,gBAAgBiB,KAAK,OAGtBjB,EALD,qBAAAe,GAAA,QAAA,WAOEf,EAAAkB,MAAAX,KAAA,KACAP,EAAE,gBAAFgB,KAAA,OAIFhB,EAAE,uBAAuBe,GAAG,SAAU,WAEpC,IAAII,EAAkBvB,WADtBF,qBAAuBwB,MAEnBE,EAAc,sBAClBD,EAAgBE,OAAS,uBACzBF,EAAgBG,MAASZ,OAAOU,GAAaE,MAC7CH,EAAgBI,eAAkBb,OAAOU,GAAaG,eAEtDV,cAAcb,EAAEN,sBAAsBY,KAAK,MACb,KAA1Ba,EAAgBK,MAKpBxB,EAAEyB,KAAK,CACLC,KAAS,OACTC,IAASjB,OAAOU,GAAaQ,QAC7BX,KAASE,EACTU,QAAS,WACP7B,EAAEN,sBAAsBY,KAAK,KAAKC,KAAK,KACvCP,EAAE,uBAAuB8B,KAAK,wCAC9B9B,EAAEN,sBAAsBqC,QAAQ,wDAIhCC,MAAA,WAED3B,iBAAAX,yBAjBDW,iBAAiBX,wBAuBnBM,EAAA,qBAAmBe,GAAGnB,SAAWD,WAEjCwB,IAAAA,EAAAvB,WADAD,mBAAkBuB,MAElBC,EAAgBG,sBAEhBT,EAAgBlB,OAAAA,qBAFhBwB,EAAgBG,MAASZ,OAAOU,GAAaE,MAI3CjB,cAAAA,EAAAA,oBAAiBV,KAAjB,MACA,KAAAwB,EAAAK,MAKAG,EAAAA,KAASjB,CACTO,KAASE,OACTU,IAASnB,OAAAU,GACPQ,QACAX,KAAAE,EAEDU,QARI,aAaH7B,MAAE,WAEFA,EAAE,aAAAiC,OAAgBA,KACnBjC,EAAA,qBAAAO,KAAA,KAhBHP,EAAA,uBAAA+B,QAAA,oEAoBF/B,EAAA,uBAAAgB,KAAA,KALMhB,EAAE,gBAAgBiC,OAAO,QAjB5B5B,iBAAAV","file":"../gpnl-inforequest.js","sourcesContent":["var request_form_element = {};\nvar check_form_element = {};\n$('.hideshowbtn').on('click', function () {\n  let btn = $(this);\n  let form  = btn.data('target');\n  $(form).show(1000);\n  $('.hideshowbtn').hide(1000);\n});\n\n$('.inforequest_form').on('reset', function () {\n  $(this).hide(1000);\n  $('.hideshowbtn').show(1000);\n});\n\n$('.gpnl-request__form').on('submit', function () {\n  request_form_element = this;\n  var post_form_value = getFormObj(request_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'request_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n\n  toggleDisable($(request_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(request_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      $(request_form_element).find('*').hide(1000);\n      $('.inforequest__title').html('<h3>Dank je voor je aanmelding!</h3>');\n      $(request_form_element).prepend('<p>Je kan nu gebruikmaken van de lesmaterialen.</p>');\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      showErrorMessage(request_form_element);\n    }\n  });\n});\n\n$('.gpnl-check__form').on('submit', function () {\n  check_form_element = this;\n  var post_form_value = getFormObj(check_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'check_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n\n  toggleDisable($(check_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(check_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      // $(check_form_element).find('*').hide();\n      // $(check_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      $('.resetBtn').remove('*');\n      $('.gpnl-check__form').hide(1000);\n      $('.gpnl-request__form').prepend('<p>Dit emailadres is niet bij ons bekend. Wil je je inschrijven?');\n      $('.gpnl-request__form').show(1000);\n      $('.hideshowbtn').remove('*');\n    }\n  });\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\nfunction showErrorMessage(request_form_element) {\n  $(request_form_element).find('*').hide();\n  $(request_form_element).append('Oh nee!');\n  $(request_form_element).append('<p>Hier gaat helaas iets mis, sorry. </p>');\n  $(request_form_element).append(\n    '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n    '\">Probeer je het nog eens? </a>');\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n}\n"]}