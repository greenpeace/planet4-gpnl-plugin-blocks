{"version":3,"sources":["gpnl-inforequest.js"],"names":["request_form_element","check_form_element","$","inputs","el","formObj","input","serializeArray","each","i","name","value","showErrorMessage","append","hide","toggleDisable","href","prop","form","on","show","data","getFormObj","post_form_value","action","window","form_config","nonce","literaturecode","find","human","ajax","type","ajaxUrl","url","success","error","this","console","log"],"mappings":"aAAA,IAAIA,qBAAuB,GACvBC,mBAAqB,GAwEvBC,SAAOC,WAAQC,GACbC,IAAAA,EAAQC,GADVH,EAAAD,EAAAE,GAAAG,iBAMF,OAHEL,EAAAM,KAAOH,EAAP,SAAAI,EAAAH,GACDD,EAAAC,EAAAI,MAAAJ,EAAAK,QAEQC,EAGPV,SAAEF,iBAAsBa,GACxBX,EAAEF,GAAsBa,KAAAA,KACtBC,OAIJZ,EAAAF,GAAAa,OAAA,WANEX,EAAEF,GAAsBa,OAAO,6CAC/BX,EAAEF,GAAsBa,OAM1B,YAASE,OAAcX,SAAIY,KAAA,uEAA3B,SAASD,cAAcX,GACrBA,EAAGa,KAAK,YAAab,EAAGa,KAAK,aA1F/Bf,EAAA,gBAAIF,GAAAA,QAAJ,WACA,IACEkB,EADEjB,EAAAA,MACckB,KAAG,UACnBjB,EAAAgB,GAAOE,KAAK,KACZlB,EAAA,gBAAgBmB,KAAK,OAGtBnB,EALD,uBAAAiB,GAAA,SAAA,WAQEnB,IAAAA,EAAoBsB,WADpBtB,qBAAuBmB,MAEnBI,EAAAA,sBACJA,EAAeC,OAAG,uBAClBD,EAAgBC,MAASC,OAAAC,GAAAC,MACzBJ,EAAgBI,eAAgBD,OAAAA,GAAhCE,eAGAb,cAAcb,EAAEF,sBAAsB6B,KAAK,MACb,KAA1BN,EAAgBO,MAKpB5B,EAAE6B,KAAK,CAALA,KAAK,OACLC,IAASP,OADJC,GAAAO,QAELC,KAAST,EACTJ,QAASE,WACTY,EAAAA,sBAASN,KAAW,KAAAf,OAClBZ,EAAEF,sBAAsB6B,OAAK,sCAI/BO,MAAO,WAELxB,iBAAiBZ,yBAhBrBY,iBAAmBZ,wBAsBnBC,EAAAA,qBAAqBkB,GAAA,SAArB,WAEA,IAAIO,EAAcJ,WADlBrB,mBAAmBoC,MAEnBd,EAAgBC,sBAChBD,EAAgBI,OAASF,qBAEzBV,EAAgBd,MAAAA,OAAAA,GAAH0B,MACbZ,cAAIQ,EAAAA,oBAA8BM,KAAA,MACf5B,KAAjBW,EAAiBX,MAKjB+B,EAAAA,KAAI,CACJE,KAAST,OACTJ,IAASE,OAAAA,GAHJU,QAILE,KAASZ,EACPrB,QAAED,SAAAA,GACFC,EAAED,oBAAoBY,KAAAA,KAAOC,OAC7BwB,EAAAA,oBAAAzB,OAAA,qCAPGyB,QAAAC,IAAAlB,IAYHT,MAAAA,WAZJA,iBAAAX,uBAHEW,iBAAAX","file":"../gpnl-inforequest.js","sourcesContent":["var request_form_element = {};\nvar check_form_element = {};\n$('.hideshowbtn').on('click', function () {\n  let btn = $(this);\n  let form  = btn.data('target');\n  $(form).show(1000);\n  $('.hideshowbtn').hide(1000);\n});\n\n$('.gpnl-request__form').on('submit', function () {\n  request_form_element = this;\n  var post_form_value = getFormObj(request_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'request_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n\n  toggleDisable($(request_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(request_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      $(request_form_element).find('*').hide();\n      $(request_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      showErrorMessage(request_form_element);\n    }\n  });\n});\n\n$('.gpnl-check__form').on('submit', function () {\n  check_form_element = this;\n  var post_form_value = getFormObj(check_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'check_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n\n  toggleDisable($(check_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(check_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function(data) {\n      $(check_form_element).find('*').hide();\n      $(check_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n      console.log(data);\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      showErrorMessage(check_form_element);\n    }\n  });\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\nfunction showErrorMessage(request_form_element) {\n  $(request_form_element).find('*').hide();\n  $(request_form_element).append('Oh nee!');\n  $(request_form_element).append('<p>Hier gaat helaas iets mis, sorry. </p>');\n  $(request_form_element).append(\n    '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n    '\">Probeer je het nog eens? </a>');\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n}\n"]}