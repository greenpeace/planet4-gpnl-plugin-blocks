{"version":3,"sources":["gpnl-inforequest.js"],"names":["request_form_element","formObj","el","inputs","$","serializeArray","each","showErrorMessage","find","value","hide","append","console","prop","window","location","href","toggleDisable","log","on","post_form_value","getFormObj","form_config","action","nonce","literaturecode","human","ajax","type","url","ajaxUrl","data","success"],"mappings":"aAAA,IAAIA,qBAAuB,GA6DzB,SAAOC,WAAPC,GACD,IAAAD,EAAA,GALKE,EAASC,EAAEF,GAAIG,iBAUnBD,OAHFA,EAAAE,KAASC,EAAAA,SAAiBP,EAAAA,GACtBA,EAAAA,EAAAA,MAAsBQ,EAAKC,QAE3BT,EAHJ,SAASO,iBAAiBP,GACxBI,EAAEJ,GAAsBQ,KAAK,KAAKE,OASpCN,EAAAJ,GAAAW,OAA2B,WACzBC,EAAAA,GAAYD,OAAZ,6CACAT,EAAEF,GAAsBa,OACxBD,YAAYE,OAAAC,SAAZC,KAAA,uEAHF,SAASC,cAAcf,GACrBU,QAAQM,IAAI,oBACZhB,EAAGW,KAAK,YAAaX,EAAGW,KAAK,aAC7BD,QAAQM,IAAI,cA5Edd,EAAE,uBAAuBe,GAAG,SAAU,WAApCnB,qBAAuBmB,KAEvBnB,QAAAA,IAAAA,iBAGA,IAAIoB,EAAkBC,WAAWrB,sBAC7BsB,EAAc,sBAClBF,EAAgBG,OAAS,uBACzBH,EAAgBI,MAASV,OAAOQ,GAAaE,MAC7CJ,EAAgBK,eAAkBX,OAAOQ,GAAaG,eAGtDR,QAAAA,IAAAA,gBAAAA,cAAcb,EAAEJ,sBAAsBQ,KAAK,MACb,KAA1BY,EAAgBM,OAKpBd,QAAQM,IAAI,mBACZd,EAAEuB,KAAK,CACLC,KAAS,OACTC,IAASf,OAAOQ,GAAaQ,QAC7BC,KAASX,EACTY,QAAS,SAAAD,GAEPnB,QAAQM,IAAI,OACZN,QAAQM,IAAIa,GACZ3B,EAAEJ,sBAAsBQ,KAAK,KAAKE,OAClCN,EAAEJ,sBAAsBW,OAAO,sCAgB/BC,MAAAA,SAAYmB,GAGbnB,QAAAM,IAAA,OA5BHN,QAAAM,IAAAa,GAkCFxB,iBAAAP,0BAvCIO,iBAAiBP","file":"../gpnl-inforequest.js","sourcesContent":["var request_form_element = {};\n$('.gpnl-request__form').on('submit', function () {\n\n  request_form_element = this;\n  console.log('Submitting...');\n\n  var post_form_value = getFormObj(request_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'request_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n\n  console.log('Disabling...');\n  toggleDisable($(request_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(request_form_element);\n    return;\n  }\n\n  console.log('Ajax posting...');\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function(data) {\n      // eslint-disable-next-line no-console\n      console.log('^-^');\n      console.log(data);\n      $(request_form_element).find('*').hide();\n      $(request_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n\n      // // Send conversion event to the GTM\n      // if (typeof dataLayer !== 'undefined') {\n      //   dataLayer.push({\n      //     'event'         : 'nieuwsbriefformulier',\n      //     'conv_campaign' : post_form_value.literaturecode,\n      //     'conv_action'   : 'registreer',\n      //     'conv_label'    : 'registreer-nieuwsbrief'\n      //   });\n      // }\n\n    },\n    error: function(data){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      // eslint-disable-next-line no-console\n      console.log('o_o');\n      console.log(data);\n      showErrorMessage(request_form_element);\n    }\n  });\n\n\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\nfunction showErrorMessage(request_form_element) {\n  $(request_form_element).find('*').hide();\n  $(request_form_element).append('Oh nee!');\n  $(request_form_element).append('<p>Hier gaat helaas iets mis, sorry. </p>');\n  $(request_form_element).append(\n    '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n    '\">Probeer je het nog eens? </a>');\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  console.log('Toggling disable');\n  el.prop('disabled', !el.prop('disabled'));\n  console.log('Disabled..');\n}\n"]}