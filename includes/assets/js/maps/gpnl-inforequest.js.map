{"version":3,"sources":["gpnl-inforequest.js"],"names":["request_form_element","getFormObj","el","formObj","inputs","showErrorMessage","$","find","input","append","value","hide","prop","window","location","href","toggleDisable","on","form","show","data","form_config","this","post_form_value","action","nonce","literaturecode","type","url","ajaxUrl","success","error"],"mappings":"aAAA,IAAIA,qBAAuB,GA4D1B,SAAAC,WAAAC,GANC,IAAIC,EAAU,GAQhBC,EAASC,EAAAA,GAAAA,iBAIPC,OAHAA,EAAEN,KAAAA,EAAAA,SAAsBO,EAAxBC,GACER,EAAAA,EAAAA,MAAsBS,EAAxBC,QAEEV,EAJJ,SAASK,iBAAiBL,GAU1BM,EAAAN,GAAAO,KAA2B,KAAAI,OACzBT,EAAEF,GAAsBY,OAAK,WAC9BN,EAAAN,GAAAS,OAAA,6CARCH,EAAEN,GAAsBS,OACtB,YAAaI,OAAOC,SAASC,KAAM,uEAKvC,SAASC,cAAcd,GACrBA,EAAGU,KAAK,YAAaV,EAAGU,KAAK,aAxE/BN,EAAE,gBAAgBW,GAAG,QAAS,WAD9B,IACEC,EADElB,EAAAA,MACciB,KAAG,UACnBX,EAAAY,GAAOC,KAAK,KACZb,EAAA,gBAAgBc,KAAK,OAGtBd,EALD,uBAAAW,GAAA,SAAA,WAYE,IAAII,EAAcpB,WAHlBD,qBAAuBsB,MAIvBC,EAAgBC,sBAChBD,EAAgBE,OAASZ,uBACzBU,EAAgBG,MAAAA,OAAhBL,GAAyCA,MAEzCL,EAAgBhB,eAAAA,OAAsBO,GAAtCmB,eACAV,cAAIO,EAAAA,sBAA8BhB,KAAA,MACfP,KAAjBK,EAAiBL,MAKjB2B,EAAAA,KAAI,CACJC,KAASf,OACTO,IAASG,OAAAA,GAHJM,QAILC,KAASP,EACPjB,QAAEN,WACFM,EAAEN,sBAAsBS,KAAAA,KAAOE,OAG/BL,EAAAN,sBAAAS,OAAA,sCATJsB,MAAA,WAqBI1B,iBAAiBL,yBAxBnBK,iBAAAL","file":"../gpnl-inforequest.js","sourcesContent":["var request_form_element = {};\n$('.hideshowbtn').on('click', function () {\n  let btn = $(this);\n  let form  = btn.data('target');\n  $(form).show(1000);\n  $('.hideshowbtn').hide(1000);\n});\n\n$('.gpnl-request__form').on('submit', function () {\n\n  request_form_element = this;\n\n  var post_form_value = getFormObj(request_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'request_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n\n  toggleDisable($(request_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(request_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      $(request_form_element).find('*').hide();\n      $(request_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n\n      // // Send conversion event to the GTM\n      // if (typeof dataLayer !== 'undefined') {\n      //   dataLayer.push({\n      //     'event'         : 'nieuwsbriefformulier',\n      //     'conv_campaign' : post_form_value.literaturecode,\n      //     'conv_action'   : 'registreer',\n      //     'conv_label'    : 'registreer-nieuwsbrief'\n      //   });\n      // }\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      showErrorMessage(request_form_element);\n    }\n  });\n\n\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\nfunction showErrorMessage(request_form_element) {\n  $(request_form_element).find('*').hide();\n  $(request_form_element).append('Oh nee!');\n  $(request_form_element).append('<p>Hier gaat helaas iets mis, sorry. </p>');\n  $(request_form_element).append(\n    '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n    '\">Probeer je het nog eens? </a>');\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n}\n"]}