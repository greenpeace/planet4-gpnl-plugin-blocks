{"version":3,"sources":["gpnl-inforequest.js"],"names":["request_form_element","formObj","el","inputs","$","serializeArray","each","showErrorMessage","find","value","hide","append","prop","window","location","href","toggleDisable","on","form","show","data","this","form_config","getFormObj","post_form_value","action","nonce","literaturecode","type","url","ajaxUrl","success","val","complete","mail","console","responseText","includes","log"],"mappings":"aAAA,IAAIA,qBAAuB,GAqEzB,SAAOC,WAAPC,GACD,IAAAD,EAAA,GALKE,EAASC,EAAEF,GAAIG,iBAUnBD,OAHFA,EAAAE,KAASC,EAAAA,SAAiBP,EAAAA,GACtBA,EAAAA,EAAAA,MAAsBQ,EAAKC,QAE3BT,EAHJ,SAASO,iBAAiBP,GACxBI,EAAEJ,GAAsBQ,KAAK,KAAKE,OASpCN,EAAAJ,GAAAW,OAA2B,WACzBT,EAAEF,GAAsBY,OAAK,6CAC9BR,EAAAJ,GAAAW,OAPG,YAAaE,OAAOC,SAASC,KAAM,uEAKvC,SAASC,cAAcd,GACrBA,EAAGU,KAAK,YAAaV,EAAGU,KAAK,aAlF/BR,EAAE,gBAAgBa,GAAG,QAAS,WAD9B,IACEC,EADElB,EAAAA,MACciB,KAAG,UACnBb,EAAAc,GAAOC,KAAK,KACZf,EAAA,gBAAgBgB,KAAK,OAGtBhB,EALD,qBAAAa,GAAA,QAAA,WAOEb,EAAAiB,MAAAX,KAAA,KACAN,EAAE,gBAAFe,KAAA,OAMAnB,EAAAA,uBAAuBiB,GAAA,SAAvB,WAEA,IAAIK,EAAcC,WADlBvB,qBAAsBuB,MAEtBC,EAAgBC,sBAChBD,EAAgBE,OAASb,uBACzBW,EAAgBG,MAAAA,OAAhBL,GAAyCA,MAEzCN,EAAgBhB,eAAAA,OAAsBQ,GAAtCmB,eACAX,cAAIQ,EAAAA,sBAA8BhB,KAAA,MACfR,KAAjBO,EAAiBP,MAKjB4B,EAAAA,KAAI,CACJC,KAAShB,OACTO,IAASI,OAAAA,GAHJM,QAILC,KAASP,EACPpB,QAAEJ,WACFI,EAAEJ,sBAAsBW,KAAAA,KAAOD,OAN5BN,EAAAJ,sBAAAW,OAAA,sCAWHJ,MAAAA,WAXJA,iBAAAP,yBAHEO,iBAAAP,wBAsBA4B,EAAAA,qBADKX,GAAA,SAAA,WAELY,IAAAA,EAAKzB,EAAA,wCAAA4B,MACLC,EAAAA,KAAAA,CACEL,KAAA,MACAC,IAAA,sDAAyCK,EACvCC,SAAAA,SAAYf,GAGZe,EAAOC,aAAKC,SAAZ,SACDF,QAAAG,IAAA,qBAAAJ,GAMPC,QAAAG,IAAA,UAAAJ","file":"../gpnl-inforequest.js","sourcesContent":["var request_form_element = {};\n$('.hideshowbtn').on('click', function () {\n  let btn = $(this);\n  let form  = btn.data('target');\n  $(form).show(1000);\n  $('.hideshowbtn').hide(1000);\n});\n\n$('.inforequest_form').on('reset', function () {\n  $(this).hide(1000);\n  $('.hideshowbtn').show(1000);\n});\n\n\n$('.gpnl-request__form').on('submit', function () {\n  request_form_element = this;\n  var post_form_value = getFormObj(request_form_element);\n  var form_config = 'request_form_object';\n  post_form_value.action = 'request_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n\n  toggleDisable($(request_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(request_form_element);\n    return;\n  }\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      $(request_form_element).find('*').hide();\n      $(request_form_element).append('<h2>Hoera, je bent er bijna!</h2>');\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      showErrorMessage(request_form_element);\n    }\n  });\n});\n\n$('.gpnl-check__form').on('submit', function () {\n  let mail = $('.gpnl-check__form input[name=\"mail\"]').val();\n  $.ajax({\n    type: 'GET',\n    url: 'https://secure.greenpeacephp.nl/kenikdeze.php?mail=' + mail,\n    complete: function (data) {\n      // If we do not know the email, we display the consentbox again\n      if (data.responseText.includes('false')) {\n        console.log(\"Ik ken deze niet: \" + mail);\n      }\n      else {\n        console.log(\"Ik ken \" + mail);\n      }\n    }\n  });\n});\n\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\nfunction showErrorMessage(request_form_element) {\n  $(request_form_element).find('*').hide();\n  $(request_form_element).append('Oh nee!');\n  $(request_form_element).append('<p>Hier gaat helaas iets mis, sorry. </p>');\n  $(request_form_element).append(\n    '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n    '\">Probeer je het nog eens? </a>');\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n}\n"]}