{"version":3,"sources":["gpnl-newsletter.js"],"names":["newsletter_form_element","formObj","el","inputs","$","serializeArray","each","i","input","toggleDisable","value","prop","showErrorMessage","find","hide","html","append","window","location","href","on","post_form_value","getFormObj","action","nonce","form_config","marketingcode","literaturecode","screenid","log","url","data","success","ajaxUrl","console","dataLayer","push","event","conv_campaign","conv_action","conv_label"],"mappings":"aAAA,IAAIA,wBAA0B,GA8D5B,SAAOC,WAAPC,GAGF,IAAAD,EAAA,GAPME,EAASC,EAAEF,GAAIG,iBAWpB,OAVCD,EAAEE,KAAKH,EAAQ,SAAUI,EAAGC,GAO9BP,EAASQ,EAAAA,MAATD,EAA2BE,QAG1BT,EAICG,SAAEK,cAAAP,GACFE,EAAEO,KAAA,YAAAT,EAAAS,KAAA,aAHJ,SAASC,iBAAiBZ,GACxBI,EAAEJ,GAAyBa,KAAK,KAAKC,OACrCV,EAAE,2BAA2BW,KAAK,WAClCX,EAAE,iCAAiCW,KAAK,6CACxCX,EAAEJ,GAAyBgB,OACzB,YAAaC,OAAOC,SAASC,KAAM,uEA3EvCf,EAAE,0BAA0BgB,GAAG,SAAU,WAIvC,IAAIC,EAAkBC,WAJtBtB,wBAA0BoB,MAItBC,EAAAA,0BAA6BrB,EAAjC,QAGAqB,EAAgBE,OAAkB,0BAClCF,EAAgBG,MAAyBC,OAAAA,GAAzCD,MACAH,EAAgBK,cAAkBT,OAAOQ,GAAaC,cACtDL,EAAgBM,eAAkBV,OAAOQ,GAAaE,eACtDN,EAAgBO,SAAyBH,OAAAA,GAAaG,SAItDnB,cAAIY,EAAAA,yBAA8BR,KAAA,MACfb,KAAjBY,EAAiBZ,OAMnBI,QAAOyB,IAAAR,GAELS,EAAAA,KAASb,CACTc,KAASV,OACTW,IAASf,OAAAQ,GAAWQ,QAClBF,KAAAV,EACAa,QAAO,WAEP9B,QAAEyB,IAAA,OACFzB,EAAEJ,yBAAAa,KAAA,KAAiCE,OADnCX,EAAE,2BAA2BW,KAAK,6BAIlCX,EAAA,iCAAyBW,KAAa,mFAGhBM,oBAAlBc,WACAA,UAAAC,KAAA,CACAC,MAAkB,uBAJpBC,cAAAjB,EAAAM,eAMDY,YAAA,aAnBEC,WAAA,4BA0BH5B,MAAAA,WAMNsB,QAAAL,IAAA,OANMjB,iBAAiBZ,6BA/BnBY,iBAAAZ","file":"../gpnl-newsletter.js","sourcesContent":["var newsletter_form_element = {};\n$('.gpnl-newsletter__form').on('submit', function () {\n\n  newsletter_form_element = this;\n  // Get the  parameter from the newsletter form and add the action and CSRF protection\n  var post_form_value = getFormObj(newsletter_form_element);\n  var form_config = 'newsletter_form_object_' + post_form_value['form_id'];\n\n  post_form_value.action          = 'newsletter_form_process';\n  post_form_value.nonce           = window[form_config].nonce;\n  post_form_value.marketingcode   = window[form_config].marketingcode;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n  post_form_value.screenid        = window[form_config].screenid;\n\n\n  toggleDisable($(newsletter_form_element).find('*'));\n  if (post_form_value.human !== '') {\n    showErrorMessage(newsletter_form_element);\n    return;\n  }\n\n  console.log(post_form_value);\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      // eslint-disable-next-line no-console\n      console.log('^-^');\n      $(newsletter_form_element).find('*').hide();\n      $('.gpnl-newsletter__title').html('Hoera, je bent er bijna! ');\n      $('.gpnl-newsletter__description').html('<h4>Bevestig je aanmelding via de mail die je van ons ontvangt. Bedankt!  </h4>');\n\n      // Send conversion event to the GTM\n      if (typeof dataLayer !== 'undefined') {\n        dataLayer.push({\n          'event'         : 'nieuwsbriefformulier',\n          'conv_campaign' : post_form_value.literaturecode,\n          'conv_action'   : 'registreer',\n          'conv_label'    : 'registreer-nieuwsbrief'\n        });\n      }\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      // eslint-disable-next-line no-console\n      console.log('o_o');\n      showErrorMessage(newsletter_form_element);\n    }\n  });\n\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n\n}\n\nfunction showErrorMessage(newsletter_form_element) {\n  $(newsletter_form_element).find('*').hide();\n  $('.gpnl-newsletter__title').html('Oh nee!');\n  $('.gpnl-newsletter__description').html('<p>Hier gaat helaas iets mis, sorry. </p>');\n  $(newsletter_form_element).append(\n    '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n    '\">Probeer je het nog eens? </a>');\n}\n"]}