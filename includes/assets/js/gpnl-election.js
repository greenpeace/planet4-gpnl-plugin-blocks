"use strict";function getFormObj(e){var n={},t=$(e).serializeArray();return $.each(t,function(e,t){n[t.name]=t.value}),n}function toggleDisable(e){e.prop("disabled",!e.prop("disabled"))}function cardflip(e){var t=$(e),n=e.parentNode,i=$(e.parentNode.parentNode);$(".btn-submit").toggle(),$(t.find(".policies")).toggle(),$(n.nextElementSibling).css("position",flip_positionattribute(n.nextElementSibling)),$(n).css("position",flip_positionattribute(n)),i.toggleClass("flipped"),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(n).toggle(),i.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})}function flip_positionattribute(e){return"absolute"===$(e).css("position")?"relative":"absolute"}function fireShareEvent(e,t){if("undefined"!=typeof dataLayer){var n="petition_form_object_"+t;dataLayer.push({event:"petitiebutton",conv_campaign:window[n].analytics_campaign,conv_action:window[n].ga_action,conv_label:"share_"+e})}else console.log("GTM not defined?")}function socialBlueDeDuplicate(e,t,n){var i=("https:"==document.location.protocol?"https://secure.event.":"http://www.")+"affiliatepartners.com",o="/js/ApConversionPixelV1.1.js";_apOrderValue=0,_apOrderNumber="email="+e+"-telefoonnumer="+t,_apRef=n;try{$("body").append(unescape("%3Cscript src='"+i+o+"' type='text/javascript'%3E%3C/script%3E"))}catch(e){var a=document.createElement("script");a.type="text/javascript",a.src=i+o,document.getElementsByTagName("head")[0].appendChild(a)}}function getUrlVars(){for(var e,t=[],n=window.location.href.split("#")[0].slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++)e=n[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}$("#electionModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget).data("id"),n=$(this),i="election_object_"+t;n.find(".modal-title").text("Stem op "+window[i].title),n.find(".modal-subtitle").text(window[i].subtitle),n.find(".modal-body").text(window[i].description),n.find("input[name='form_id']").val(t),n.find("input[name='marketingcode']").val(window[i].mcode)}),$(document).ready(function(){var e,t;e=".election-options",t=$("#electionModal").data("num"),$(e).slick({infinite:!1,mobileFirst:!0,slidesToShow:1,slidesToScroll:1,arrows:!0,dots:!0,centerMode:!0,centerPadding:"20px",initialSlide:3,responsive:[{breakpoint:992,settings:{slidesToShow:t}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:576,settings:{slidesToShow:2}}]});var n=getUrlVars().opt,i=getUrlVars().cg,o=-1!==document.referrer.indexOf("facebook"),a=-1!==document.referrer.indexOf("twitter"),s=getUrlVars().clangct;null!=s&&$.ajax({url:"/wp-content/plugins/planet4-gpnl-plugin-blocks/includes/assets/js/clang-landing.js?clangct="+s,dataType:"script"}),null!=n&&0!=$(".optin").length&&"in"==n&&($(".optin").hide(),$(".gpnl-petition-checkbox").prop("checked",!0),$("input[name='mail']").keyup(function(){if(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{3,})$/i.test(this.value)){var e=encodeURIComponent(this.value);$.ajax({type:"GET",url:"https://secure.greenpeacephp.nl/kenikdeze.php?mail="+e,complete:function(e){e.responseText.includes("false")&&($(".optin").show(),$(".gpnl-petition-checkbox").prop("checked",!1))}})}}),a||o||null==i||l("prefill",this));var r=l("teller",{tellerCode:"election_object".analytics_campaign});function l(o,a){var s=new XMLHttpRequest,e="",t="";"prefill"===o?(e="GET_FIRST_NAME_EMAIL",t=i):"teller"===o&&(e="CAMP_TTL_PETITIONS",t=a.tellerCode),s.open("POST","https://www.mygreenpeace.nl/GPN.WebServices/WIDSService.asmx",!0);var n='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  <soap:Body>    <WatIsDestand xmlns="http://www.mygreenpeace.nl/GPN.WebServices/">      <queryId>'+e+"</queryId>      <requestValue>"+t+"</requestValue>    </WatIsDestand>  </soap:Body></soap:Envelope>";s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){var e=s.responseXML.getElementsByTagName("WatIsDestandResult")[0].firstChild.nodeValue;if(""!==e){var t=e.split("|");if("prefill"===o){var n=t[0];$(a).find("input[name='name']").val(n);var i=t[1];$(a).find("input[name='mail']").val(i)}else if("teller"===o&&t[0]>="election_object".counter_min)return Number(t[0])}}},s.setRequestHeader("Content-Type","text/xml"),s.setRequestHeader("SOAPAction","http://www.mygreenpeace.nl/GPN.WebServices/WatIsDestand"),s.send(n)}$("#counter_total").data("num",r),$("#counter_total").text(r+" stemmen"),$(".subcounter").each(function(){var e="election_object_"+$(this).data("id");this.tellerCode=e.mcode,function(e,t){var n=$("#counter_total").data("num");$(t).find(".counter").show();var i=Math.round(e/n*100);$(t).find(".counter__slider").animate({width:i+"%",opacity:1},2e3,"easeInOutCubic"),$(t).find(".counter__gettext").html(i+"% van de stemmen"),$(t).find(".counter__text").fadeIn(2e3)}(l("teller",this),this)})}),$(".gpnl-petitionform").on("submit",function(){var e=this,t=getFormObj(e);t.action="petition_form_process",t.nonce=window.election_object.nonce,toggleDisable($(e).find("*")),toggleDisable($(".btn-submit")),cardflip(e)});
//# sourceMappingURL=maps/gpnl-election.js.map
