"use strict";function getFormObj(e){var n={},t=$(e).serializeArray();return $.each(t,function(e,t){n[t.name]=t.value}),n}function toggleDisable(e){e.prop("disabled",!e.prop("disabled"))}function cardflip(e){var t=$(e),n=e.parentNode,i=$(e.parentNode.parentNode);$(".btn-submit").toggle(),$(t.find(".policies")).toggle(),$(n.nextElementSibling).css("position",flip_positionattribute(n.nextElementSibling)),$(n).css("position",flip_positionattribute(n)),i.toggleClass("flipped"),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(n).toggle(),i.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})}function flip_positionattribute(e){return"absolute"===$(e).css("position")?"relative":"absolute"}function fireShareEvent(e,t){if("undefined"!=typeof dataLayer){var n="petition_form_object_"+t;dataLayer.push({event:"petitiebutton",conv_campaign:window[n].analytics_campaign,conv_action:window[n].ga_action,conv_label:"share_"+e})}else console.log("GTM not defined?")}function socialBlueDeDuplicate(e,t,n){var i=("https:"==document.location.protocol?"https://secure.event.":"http://www.")+"affiliatepartners.com",a="/js/ApConversionPixelV1.1.js";_apOrderValue=0,_apOrderNumber="email="+e+"-telefoonnumer="+t,_apRef=n;try{$("body").append(unescape("%3Cscript src='"+i+a+"' type='text/javascript'%3E%3C/script%3E"))}catch(e){var o=document.createElement("script");o.type="text/javascript",o.src=i+a,document.getElementsByTagName("head")[0].appendChild(o)}}function getUrlVars(){for(var e,t=[],n=window.location.href.split("#")[0].slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++)e=n[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function showCounter(e,t){var n=$("#counter_total").data("num");$(t).find(".counter").show();var i=Math.round(e/n*100);$(t).find(".counter__slider").animate({width:i+"%",opacity:1},2e3,"easeInOutCubic"),$(t).find(".counter__gettext").html(i+"% van de stemmen"),$(t).find(".counter__text").fadeIn(2e3)}function prefillByGuid(a,o){var l=window.election_object,r=new XMLHttpRequest,e="",t="";"prefill"===a?(e="GET_FIRST_NAME_EMAIL",t=o.url_cg):"teller"===a&&(e="CAMP_TTL_PETITIONS",t=o.tellerCode),r.open("POST","https://www.mygreenpeace.nl/GPN.WebServices/WIDSService.asmx",!0);var n='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  <soap:Body>    <WatIsDestand xmlns="http://www.mygreenpeace.nl/GPN.WebServices/">      <queryId>'+e+"</queryId>      <requestValue>"+t+"</requestValue>    </WatIsDestand>  </soap:Body></soap:Envelope>";r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=r.responseXML.getElementsByTagName("WatIsDestandResult")[0].firstChild.nodeValue;if(""!==e){var t=e.split("|");if("prefill"===a){var n=t[0];$(o).find("input[name='name']").val(n);var i=t[1];$(o).find("input[name='mail']").val(i)}else"teller"===a&&Number(e)>=l.counter_min&&("total"===o.type&&($("#counter_total").data("num",e),$("#counter_total").text(e+" stemmen")),console.log(e))}}},r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("SOAPAction","http://www.mygreenpeace.nl/GPN.WebServices/WatIsDestand"),r.send(n)}$("#electionModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget).data("id"),n=$(this),i=window["election_object_"+t];n.find(".modal-title").text("Stem op "+i.title),n.find(".modal-subtitle").text(i.subtitle),n.find(".modal-body").text(i.description),n.find("input[name='form_id']").val(t),n.find("input[name='marketingcode']").val(i.mcode)}),$(document).ready(function(){var e,t;e=".election-options",t=$("#electionModal").data("num"),$(e).slick({infinite:!1,mobileFirst:!0,slidesToShow:1,slidesToScroll:1,arrows:!0,dots:!0,centerMode:!0,centerPadding:"50px",initialSlide:3,responsive:[{breakpoint:992,settings:{slidesToShow:t}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:576,settings:{slidesToShow:2}}]});var n=getUrlVars().opt;this.url_cg=getUrlVars().cg;var i=-1!==document.referrer.indexOf("facebook"),a=-1!==document.referrer.indexOf("twitter"),o=getUrlVars().clangct;null!=o&&$.ajax({url:"/wp-content/plugins/planet4-gpnl-plugin-blocks/includes/assets/js/clang-landing.js?clangct="+o,dataType:"script"}),null!=n&&0!=$(".optin").length&&"in"==n&&($(".optin").hide(),$(".gpnl-petition-checkbox").prop("checked",!0),$("input[name='mail']").keyup(function(){if(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{3,})$/i.test(this.value)){var e=encodeURIComponent(this.value);$.ajax({type:"GET",url:"https://secure.greenpeacephp.nl/kenikdeze.php?mail="+e,complete:function(e){e.responseText.includes("false")&&($(".optin").show(),$(".gpnl-petition-checkbox").prop("checked",!1))}})}}),a||i||null==url_cg||prefillByGuid("prefill",this));var l=window.election_object;if(prefillByGuid("teller",{tellerCode:l.analytics_campaign,type:"total"}),!Number(l.hideresults)){var r=$(".subcounter"),s=Math.floor(r.length/2);r=r.slice(0,s),$(r).each(function(){var e=$(this).data("id"),t=window["election_object_"+e];this.id=e,this.type="subtotal",this.tellerCode=t.mcode,prefillByGuid("teller",this)})}}),$(".gpnl-petitionform").on("submit",function(){var t=this,n=getFormObj(t),i=window.election_object;n.action="petition_form_process",n.nonce=i.nonce,n.ad_campaign=i.ad_campaign,toggleDisable($(t).find("*")),toggleDisable($(".btn-submit")),$.ajax({type:"POST",url:i.ajaxUrl,data:n,success:function(e){console.log("^-^"),"undefined"!=typeof dataLayer&&dataLayer.push({event:"petitiebutton",conv_campaign:i.analytics_campaign,conv_action:"verkiezing",conv_label:"registreer"}),""!==n.phone?"undefined"!=typeof dataLayer&&dataLayer.push({event:"petitiebutton",conv_campaign:i.analytics_campaign,conv_action:"telnr",conv_label:"Ja"}):"undefined"!=typeof dataLayer&&dataLayer.push({event:"petitiebutton",conv_campaign:i.analytics_campaign,conv_action:"telnr",conv_label:"Nee"}),cardflip(t),$("#electionModal").on("hidden.bs.modal",function(){$($(".gpnl-petition-thank")[0]).hide()}),null!=getUrlVars().clangct&&clang.conversion.track()},error:function(){console.log("o_o");var e=$(t.parentNode.nextElementSibling);e.find("*").hide(""),e.append("<p>Sorry, er gaat momenteel iets fout, probeer het nu of later opnieuw.</p>"),e.append("<a href='"+window.location.href+'\' class="btn btn-primary btn-block"">Probeer opnieuw</a>'),cardflip(t)}})});
//# sourceMappingURL=maps/gpnl-election.js.map
