"use strict";function getUrlVars(){for(var e,t=[],n=window.location.href.split("#")[0].slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++)e=n[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function getFormObj(e){var n={},t=$(e).serializeArray();return $.each(t,function(e,t){n[t.name]=t.value}),n}function toggleDisable(e){e.prop("disabled",!e.prop("disabled"))}function cardflip(e){var t=$(e),n=e.parentNode,i=$(e.parentNode.parentNode);$(t.find(".signBtn")).toggle(),$(t.find(".policies")).toggle(),$(n.nextElementSibling).css("position",flip_positionattribute(n.nextElementSibling)),$(n).css("position",flip_positionattribute(n)),i.toggleClass("flipped"),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(n).toggle(),i.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})}function flip_positionattribute(e){return"absolute"===$(e).css("position")?"relative":"absolute"}$(document).ready(function(){var e=getUrlVars().opt,i=getUrlVars().cg,t=-1!==document.referrer.indexOf("facebook"),n=-1!==document.referrer.indexOf("twitter"),o=getUrlVars().clangct;function a(o,a){var r=new XMLHttpRequest,e="",t="";"prefill"===o?(e="GET_FIRST_NAME_EMAIL",t=i):"teller"===o&&(e="CAMP_TTL_PETITIONS",t=a.tellerCode),r.open("POST","https://www.mygreenpeace.nl/GPN.WebServices/WIDSService.asmx",!0);var n='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  <soap:Body>    <WatIsDestand xmlns="http://www.mygreenpeace.nl/GPN.WebServices/">      <queryId>'+e+"</queryId>      <requestValue>"+t+"</requestValue>    </WatIsDestand>  </soap:Body></soap:Envelope>";r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=r.responseXML.getElementsByTagName("WatIsDestandResult")[0].firstChild.nodeValue;if(""!==e){var t=e.split("|");if("prefill"===o){var n=t[0];$(a).find("input[name='name']").val(n);var i=t[1];$(a).find("input[name='mail']").val(i)}else"teller"===o&&function(e,t){var n=t.parentNode;if(e>=t.counter_min){$(n).find(".counter").show();var i=Math.round(e/t.counter_max*100);e>=t.counter_max&&(i=100),$(n).find(".counter__slider").animate({width:i+"%",opacity:1},2e3,"easeInOutCubic"),$(n).find(".counter__gettext").html(e.toLocaleString("nl-NL")+" "+t.counter_text),$(n).find(".counter__text").fadeIn(2e3)}}(Number(t[0]),a)}}},r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("SOAPAction","http://www.mygreenpeace.nl/GPN.WebServices/WatIsDestand"),r.send(n)}null!=o&&$.ajax({url:"/wp-content/plugins/planet4-gpnl-plugin-blocks/includes/assets/js/clang-landing.js?clangct="+o,dataType:"script"}),null!=e&&0!=$(".optin").length&&"in"==e&&($(".optin").hide(),$(".gpnl-petition-checkbox").prop("checked",!0),$("input[name='mail']").keyup(function(){if(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(this.value)){var e=encodeURIComponent(this.value);$.ajax({type:"GET",url:"https://secure.greenpeacephp.nl/kenikdeze.php?mail="+e,complete:function(e){e.responseText.includes("false")&&($(".optin").show(),$(".gpnl-petition-checkbox").prop("checked",!1))}})}}),n||t||a("prefill",this)),$(".gpnl-petitionform").each(function(){var t=this,n="petition_form_object_"+getFormObj(t).form_id;this.tellerCode=window[n].analytics_campaign,this.counter_min=Number(window[n].countermin),this.counter_max=Number(window[n].countermax),this.counter_text=window[n].countertext,$(t).find(":submit").prop("disabled")||toggleDisable($(t).find(":submit")),$.ajax({type:"POST",url:window.p4_vars.ajaxurl,data:{action:"request_id"},success:function(e){console.log("succes"),window[n].nonce=e.data.nonce,toggleDisable($(t).find(":submit"))},error:function(){console.log("o_o");var e=$(t.parentNode.nextElementSibling);e.find("*").hide(""),e.append("<p>Sorry, er gaat momenteel iets fout, probeer het nu of later opnieuw.</p>"),e.append("<a href='"+window.location.href+'\' class="btn btn-primary btn-block"">Probeer opnieuw</a>'),cardflip(t)}}),a("teller",this)})});
//# sourceMappingURL=maps/onload.js.map
